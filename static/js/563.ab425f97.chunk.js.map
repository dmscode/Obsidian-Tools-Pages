{"version":3,"file":"static/js/563.ab425f97.chunk.js","mappings":"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","sources":["routes/QuickNote.js"],"sourcesContent":["import { useCallback, useEffect, useRef, useState } from \"react\";\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport { faGear, faNoteSticky, faPaperPlane, faMugHot, faBroom } from '@fortawesome/free-solid-svg-icons'\r\nimport './QuickNote.css';\r\n\r\n/* ======== 按钮图标 ======== */\r\nconst configIcon = <FontAwesomeIcon icon={faGear} />\r\nconst noteIcon = <FontAwesomeIcon icon={faNoteSticky} />\r\nconst sendIcon = <FontAwesomeIcon icon={faPaperPlane} />\r\nconst coffeeIcon = <FontAwesomeIcon icon={faMugHot} />\r\nconst broomIcon = <FontAwesomeIcon icon={faBroom} />\r\n\r\n/* ======== 默认设置 ======== */\r\nconst defaultPath = 'obsidian://advanced-uri?filepath=Logs%252F{{date}}.md'\r\nconst defaultTemplate = `---\r\ncreated: {{date}} {{time}}\r\nupdated: {{date}} {{time}}\r\n---\r\n\r\n{{content}}`\r\n/**\r\n * 数字两位化\r\n *\r\n * @param {number} num 0~99 的整数\r\n * @returnn {string}\r\n */\r\nconst dbNum = num => String(num).padStart(2, '0')\r\n\r\nconst QuickNote = () => {\r\n  const contentEl = useRef(null)\r\n  const [showConfig, setShowConfig] = useState(()=>!window.localStorage.getItem('QuickNotePath') || !window.localStorage.getItem('QuickNoteTemplate'))\r\n  const [notePath, setNotePath] = useState(()=>window.localStorage.getItem('QuickNotePath') || defaultPath)\r\n  const [template, setTemplate] = useState(()=>window.localStorage.getItem('QuickNoteTemplate') || defaultTemplate)\r\n  const [note, setNote] = useState(()=>window.localStorage.getItem('QuickNoteContent') || '')\r\n\r\n  useEffect(()=>{ window.localStorage.setItem('QuickNotePath', notePath) }, [notePath])\r\n  useEffect(()=>{ window.localStorage.setItem('QuickNoteTemplate', template) }, [template])\r\n  useEffect(()=>{ window.localStorage.setItem('QuickNoteContent', note) }, [note])\r\n\r\n  useEffect(()=>{\r\n    if(!showConfig) contentEl.current.focus()\r\n  }, [showConfig])\r\n\r\n  const sendNote = useCallback(()=>{\r\n    const now = new Date()\r\n    const keywords = {\r\n      content: note,\r\n      YYYY: now.getFullYear(),\r\n      MM: dbNum(now.getMonth()+1),\r\n      dd: dbNum(now.getDate()),\r\n      HH: dbNum(now.getHours()),\r\n      mm: dbNum(now.getMinutes()),\r\n      ss: dbNum(now.getSeconds()),\r\n    }\r\n    keywords.date = `${keywords.YYYY}-${keywords.MM}-${keywords.dd}`\r\n    keywords.time = `${keywords.HH}:${keywords.mm}:${keywords.ss}`\r\n\r\n    const path = notePath.replace(/\\{\\{(\\w+)\\}\\}/g, (m, s)=> keywords[s] || m)\r\n    const data = template.replace(/\\{\\{(\\w+)\\}\\}/g, (m, s)=> keywords[s] || m)\r\n    window.open(`${path}&data=${encodeURIComponent(data)}&mode=append`)\r\n  }, [note, notePath, template])\r\n  const updatePath = useCallback((e)=>{\r\n    const newPath = decodeURIComponent(decodeURIComponent(e.target.value.replace(/\\n/, '')))\r\n    if(newPath === notePath) return\r\n    setNotePath(newPath)\r\n  }, [notePath, setNotePath])\r\n  const clearAll = useCallback(()=>{\r\n    if(window.confirm('Clear all content ?')) setNote('')\r\n  }, [])\r\n  return (\r\n    <div className=\"quick-note\">\r\n      {\r\n        showConfig\r\n        ? (\r\n          <div className=\"quick-note-config\">\r\n            <div className=\"card\">\r\n            <label htmlFor=\"quick-note-path\">笔记地址（Advanced URI 格式）：</label>\r\n            <textarea\r\n              id=\"quick-note-path\"\r\n              placeholder=\"笔记地址（Advanced URI 格式），可以使用下方变量。\"\r\n              value={notePath.replace(/(\\?|&)/g, '\\n$1') || ''}\r\n              onChange={updatePath}></textarea>\r\n            </div>\r\n            <div className=\"card\">\r\n            <label htmlFor=\"quick-note-template\">笔记模板：</label>\r\n            <textarea\r\n              id=\"quick-note-template\"\r\n              placeholder=\"笔记模板，可以使用下方变量。考虑到可能追加在原有笔记中，所以不建议比较复杂。\"\r\n              value={template || ''}\r\n              onChange={e=>setTemplate(e.target.value)}></textarea>\r\n            </div>\r\n          </div>\r\n        )\r\n        : <div className=\"card quick-note-input\">\r\n            <textarea\r\n              id=\"quick-note-content\"\r\n              ref={contentEl}\r\n              placeholder=\"写下笔记，然后发送……\"\r\n              value={note || ''}\r\n              onChange={e=>setNote(e.target.value)}></textarea>\r\n            {(note&&note.length) && <button className=\"clear-all\" onClick={clearAll}>{broomIcon}</button>}\r\n          </div>\r\n      }\r\n      <div className=\"card button-group\">\r\n        <button className=\"toggle\" onClick={()=>{setShowConfig(nowState=>!nowState)}}> {showConfig ? noteIcon : configIcon } </button>\r\n        {\r\n          showConfig\r\n          ? <button className=\"coffee\" onClick={()=>{window.open('https://afdian.net/a/daomishu', '_blank')}}>{coffeeIcon} Coffee</button>\r\n          : <button className=\"send\" onClick={sendNote}>Send Note {sendIcon}</button>}\r\n      </div>\r\n      \r\n      {showConfig && (\r\n        <div className=\"card quick-note-desc\">\r\n          <h3>使用说明：</h3>\r\n          <p>本工具基于 <a href=\"https://github.com/Vinzent03/obsidian-advanced-uri\">Advanced URI</a> 的 Api，故需要先安装此插件。</p>\r\n          <p>然后在你预定的位置创建一篇笔记，复制这篇笔记的 Advanced URI ，粘贴到本工具的笔记地址栏。这样所有新添加内容都会追加到这篇笔记中。</p>\r\n          <p>你也可以在地址中使用变量，变量的格式：<code>&#123;&#123;关键字&#125;&#125;</code>。从而实现按一定规则自动创建笔记。</p>\r\n          <p>模板中同样可以使用变量实现 Front matter 的添加。需要注意：<strong>模板中必须用 <code>&#123;&#123;content&#125;&#125;</code> 变量来插入笔记的内容</strong>，否则就不包含你书写的笔记了哦~</p>\r\n          <p>工具有数据自动保存和自动恢复，只是以防意外，必要过度依赖，不要使用浏览器的退出自动清除浏览数据或者隐私浏览模式。</p>\r\n          <p>输入内容后输入框右上角有一个半透明按钮（不太明显），点击可以清空输入框。</p>\r\n          <p><strong>可用变量关键字：</strong></p>\r\n          <ul>\r\n          <li><code>content</code>：你输入的笔记内容</li>\r\n          <li><code>date</code>：2022-11-16 格式的日期</li>\r\n          <li><code>time</code>：16:05:31 格式的时间</li>\r\n          <li><code>YYYY</code>：年份</li>\r\n          <li><code>MM</code>：月份</li>\r\n          <li><code>dd</code>：日期</li>\r\n          <li><code>HH</code>：小时</li>\r\n          <li><code>mm</code>：分钟</li>\r\n          <li><code>ss</code>：秒</li>\r\n          </ul>\r\n\r\n        </div>\r\n      )}\r\n    </div>\r\n  )\r\n};\r\n\r\nexport default QuickNote;\r\n"],"names":["configIcon","icon","faGear","noteIcon","faNoteSticky","sendIcon","faPaperPlane","coffeeIcon","faMugHot","broomIcon","faBroom","dbNum","num","String","padStart","contentEl","useRef","useState","window","localStorage","getItem","showConfig","setShowConfig","notePath","setNotePath","template","setTemplate","note","setNote","useEffect","setItem","current","focus","sendNote","useCallback","now","Date","keywords","content","YYYY","getFullYear","MM","getMonth","dd","getDate","HH","getHours","mm","getMinutes","ss","getSeconds","date","time","path","replace","m","s","data","open","encodeURIComponent","updatePath","e","newPath","decodeURIComponent","target","value","clearAll","confirm","className","htmlFor","id","placeholder","onChange","ref","length","onClick","nowState","href"],"sourceRoot":""}